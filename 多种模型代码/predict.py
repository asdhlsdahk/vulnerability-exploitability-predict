import pandas as pd
from sklearn.model_selection import train_test_split
import lightgbm as lgb
from sklearn.metrics import mean_absolute_error
from sklearn.metrics import accuracy_score
# from sklearn.preprocessing import Imputer
from sklearn.impute import SimpleImputer
from sklearn.metrics import roc_auc_score, accuracy_score
import numpy as np
# 1.读文件
import pickle
import csv
import matplotlib.pyplot as plt
data = pd.read_csv("E:\大学学习\大学学习\大三下\信安赛\数据源\数据更新\\0827train.csv")
with open('E:\大学学习\大学学习\大三下\信安赛\数据源\数据更新\\model.pickle', 'rb') as f:
   mymodel = pickle.load(f)
   # print(clf2.predict(X[0:1]))
pickle_file = open("E:\大学学习\大学学习\大三下\信安赛\数据源\数据更新\\train0827.pkl","rb")
x_predict = pickle.load(pickle_file)
predictionsall = mymodel.predict(x_predict)
csvFile = open("E:\大学学习\大学学习\大三下\信安赛\数据源\数据更新\\prediction0827.csv", 'w', newline='',encoding='utf-8')
writer = csv.writer(csvFile)
writer.writerow(("cve-id",	"Prediction"))
for j in range(0, len(data['cve-id'])):
    cveidd = data['cve-id'][j]
    predict = predictionsall[j]
    writer.writerow((cveidd,predict))