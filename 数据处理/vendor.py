import csv
import pandas as pd
import os
import sys
import shutil


def mkdir(path):
    # 去除首位空格
    path = path.strip()
    # 去除尾部 \ 符号
    path = path.rstrip("\\")

    # 判断路径是否存在
    # 存在     True
    # 不存在   False

    isExists = os.path.exists(path)

    # 判断结果
    if not isExists:
        # 如果不存在则创建目录
          # 创建目录操作函数
        os.makedirs(path)

        print(path + ' 创建成功')
        return True
    else:
        # 如果目录存在则不创建，并提示目录已存在
        print(path + ' 目录已存在')
        return False


# --------------提取所有厂商------------------

# all = []
# with open("vendor_vul.csv","r") as fp:
#     data = csv.reader(fp)
#     cl = [row[3] for row in data]
#     all = cl
# alls = set(all)
# result = pd.value_counts(cl)
# pd.set_option('display.max_rows', None)
# pd.set_option('display.max_columns', None)
# print("result:",result)

# ------------统计厂商的个数-----------------

# with open("1.txt","w") as fpp:
#     fpp.write(str(result))
# print(type(result))

filepath = "E:\大学学习\研究生\毕设\\data\\user\\"

# -------------提取前几个厂商--------------
vendor1 = []
vendor2 = []
with open("1.txt","r") as t:
    for i in range(0,11):
        data = t.readline()
        for j in range(0,len(data)):
            if data[j]==" ":
                length = j;
        # print(data[0:length])
        a = data[:length]
        vendor1.append(a)
# print(vendor1)
for i in range(0,len(vendor1)):
    a= vendor1[i].strip()
    vendor1[i].strip(vendor1[0][10])
    vendor2.append(a)

vendor2.remove("0")
print(vendor2)

# ---------------创建文件夹------------------
# for i in vendor2:
#     dirpath = filepath+str(i)
#     mkdir(dirpath)

# ---------------将所有厂商的对应的CVEID弄进去-------------------
# reader = open("vendor_vul.csv", 'r', newline='')
A = []
B = []
Microsoft = []
Apple = []
IBM = []
Cisco = []
Google = []
Adobe = []
Linux = []
HP = []
Mozilla = []
Debian = []

with open('vendor_vul.csv','r') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        A.append(row[1])
        B.append(row[3])

for i in range(0,len(B)):
    if B[i]=="Microsoft":
        Microsoft.append(A[i])

filetxt = filepath + "Microsoft\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Microsoft))

for i in range(0,len(B)):
    if B[i]=="Apple":
        Apple.append(A[i])

filetxt = filepath + "Apple\\1.txt"
with open(filetxt,"w") as fp:
    fp.write("\n".join(Apple))
for i in range(0,len(B)):
    if B[i]=="IBM":
        IBM.append(A[i])
filetxt = filepath + "IBM\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(IBM))

for i in range(0,len(B)):
    if B[i]=="Cisco":
        Cisco.append(A[i])
filetxt = filepath + "Cisco\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Cisco))
for i in range(0,len(B)):
    if B[i]=="Google":
        Google.append(A[i])
filetxt = filepath + "Google\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Google))
for i in range(0,len(B)):
    if B[i]=="Adobe":
        Adobe.append(A[i])
filetxt = filepath + "Adobe\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Adobe))
for i in range(0,len(B)):
    if B[i]=="Linux":
        Linux.append(A[i])
filetxt = filepath + "Linux\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Linux))
for i in range(0,len(B)):
    if B[i]=="HP":
        HP.append(A[i])
filetxt = filepath + "HP\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(HP))
for i in range(0,len(B)):
    if B[i]=="Mozilla":
        Mozilla.append(A[i])
filetxt = filepath + "Mozilla\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Mozilla))
for i in range(0,len(B)):
    if B[i]=="Debian":
        Debian.append(A[i])
filetxt = filepath + "Debian\\1.txt"
with open(filetxt, "w") as fp:
    fp.write("\n".join(Debian))

