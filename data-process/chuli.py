import pandas as pd
import csv
import os
idx = 0
y = []
dirpath = "E:\大学学习\研究生\毕设\\data\\user"
for filename in os.listdir(dirpath):
    dirna1 = dirpath + "\\" + filename
    csvnameread = dirna1 + "\\1.csv"
    csvnamewrite = dirna1 + "\\train.csv"
    print(csvnameread)
    txtname = dirna1 + "\\id.txt"
    data = pd.read_csv(csvnameread)
    csvFile = open(csvnamewrite, 'a', newline='', encoding='utf-8')
    writer = csv.writer(csvFile)
    for j in range(0, len(data['vector'])):
        idx = idx + 1
        exp = data['EXP'][j]
        a = data['vector'][j]
        b = a.split(' ')
        b = [float(x) for x in b]
        writer.writerow((b))
    with open(txtname,"w") as fp:
        fp.write(str(idx))



# ------------不全换成float-----------------
# for i in range(0,337):
#     if i <236:
#         b[i] = int(b[i])
#     if i >= 236 and i <= 300:
#         b[i] = float(b[i])
#     if i>300 and i <335:
#         b[i] = int(b[i])
#     if i>=335:
#         b[i] = float(b[i])
# -----------------------------------------
# 236-300 335-337